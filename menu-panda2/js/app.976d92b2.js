(function(){"use strict";var t={539:function(t,e,r){var o=r(963),n=r(252),i=r.p+"img/logo.271dd957.png",a={key:0,class:"loadingPanda"},d=(0,n._)("img",{src:i,alt:"Menu Panda"},null,-1),s=(0,n._)("p",null,"Loading...",-1),c=[d,s],u={key:1};function l(t,e,r,i,d,s){var l=(0,n.up)("router-view"),m=(0,n.up)("item-detail-component"),f=(0,n.up)("footer-component"),h=(0,n.up)("order-list-modal-component"),p=(0,n.up)("alert-modal-component"),v=(0,n.up)("order-history-modal-component");return t.isLoading?((0,n.wg)(),(0,n.iD)("div",a,c)):((0,n.wg)(),(0,n.iD)("section",u,[(0,n.Wm)(l,{systemData:t.systemData,banners:t.banners,categories:t.categories,orderList:t.orderList,onShowItemDetail:t.showItemDetail,onAddToOrder:t.addToOrder,onRemoveOrderItem:t.removeOrderItem},{default:(0,n.w5)((function(t){var e=t.Component;return[(0,n.Wm)(o.uT,{name:"fade",mode:"out-in"},{default:(0,n.w5)((function(){return[((0,n.wg)(),(0,n.j4)((0,n.LL)(e)))]})),_:2},1024)]})),_:1},8,["systemData","banners","categories","orderList","onShowItemDetail","onAddToOrder","onRemoveOrderItem"]),(0,n.Wm)(m,{diplayItemId:t.diplayItemId,items:t.items,totalAmount:t.totalAmount,onCloseItemDetail:t.closeItemDetail,onAddToOrder:t.addToOrder,onRemoveOrderItem:t.removeOrderItem},null,8,["diplayItemId","items","totalAmount","onCloseItemDetail","onAddToOrder","onRemoveOrderItem"]),(0,n.Wm)(f,{orderList:t.orderList,totalAmount:t.totalAmount,onShowOrderListModal:t.showOrderListModal},null,8,["orderList","totalAmount","onShowOrderListModal"]),(0,n.Wm)(h,{isShowOrderListModal:t.isShowOrderListModal,orderList:t.orderList,totalAmount:t.totalAmount,systemData:t.systemData,isShowOrderListModalLoading:t.isShowOrderListModalLoading,orderHistory:t.orderHistory,onShowOrderListModal:t.showOrderListModal,onRemoveOrderItem:t.removeOrderItem,onOrderSubmitted:t.orderSubmitted,onUpdateCustomerInfo:t.updateCustomerInfo,onShowOrderListModalLoading:t.showOrderListModalLoading},null,8,["isShowOrderListModal","orderList","totalAmount","systemData","isShowOrderListModalLoading","orderHistory","onShowOrderListModal","onRemoveOrderItem","onOrderSubmitted","onUpdateCustomerInfo","onShowOrderListModalLoading"]),(0,n.Wm)(p,{isShowAlertModal:t.isShowAlertModal,orderId:t.orderId,onShowAlertModal:t.showAlertModal},null,8,["isShowAlertModal","orderId","onShowAlertModal"]),(0,n.Wm)(v,{isShowOrderHistoryModal:t.isShowOrderHistoryModal,orderHistory:t.orderHistory,systemData:t.systemData,onShowOrderHistoryModal:t.showOrderHistoryModal},null,8,["isShowOrderHistoryModal","orderHistory","systemData","onShowOrderHistoryModal"])]))}var m,f,h,p=r(262);function v(t){var e=JSON.parse(t.substring(47).slice(0,-2)),r=e.table.cols;return 0===e.table.parsedNumHeaders?[]:e.table.rows.map((function(t){var e={};return t.c.forEach((function(t,o){"_"!==r[o].label.substring(0,1)&&(e[r[o].label]=null===t?"":t.v)})),e}))}(function(t){t["waiting"]="waiting",t["queueing"]="queueing",t["preparing"]="preparing",t["completed"]="completed"})(m||(m={})),function(t){t["create"]="create",t["createWithInsert"]="createWithInsert",t["reading"]="reading",t["update"]="update",t["delete"]="delete"}(f||(f={})),function(t){t["post"]="post",t["update"]="update"}(h||(h={}));var g=r(577),w=function(t){return(0,n.dD)("data-v-eefef904"),t=t(),(0,n.Cn)(),t},y={key:0,class:"overlayContainer"},O={class:"container"},_={class:"header"},C={class:"row"},I=["src"],D={class:"content"},L={class:"title"},b={class:"description truncate"},k={class:"bottom"},S=w((function(){return(0,n._)("span",null,"RM",-1)})),M={class:"addedContent"},A=w((function(){return(0,n._)("br",null,null,-1)})),x={class:"footer"},H={class:"total"};function E(t,e,r,i,a,d){var s=(0,n.up)("font-awesome-icon");return(0,n.wg)(),(0,n.j4)(o.uT,{name:"show"},{default:(0,n.w5)((function(){return[t.diplayItemId?((0,n.wg)(),(0,n.iD)("div",y,[(0,n._)("div",{onClick:e[0]||(e[0]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.close&&t.close.apply(t,e)}),class:"overlay"}),(0,n._)("div",O,[(0,n._)("div",_,[(0,n._)("div",{onClick:e[1]||(e[1]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.close&&t.close.apply(t,e)}),class:"transparent button"},[(0,n.Wm)(s,{icon:"xmark"})])]),(0,n._)("div",C,[t.item.image?((0,n.wg)(),(0,n.iD)("img",{key:0,src:t.item.image+"=w800"},null,8,I)):(0,n.kq)("",!0),(0,n._)("div",D,[(0,n._)("p",L,(0,g.zw)(t.item.name),1),(0,n._)("p",b,(0,g.zw)(t.item.code)+". "+(0,g.zw)(t.item.description),1),(0,n._)("div",k,[(0,n._)("button",{onClick:e[2]||(e[2]=function(e){return t.addToOrder(t.item.id)}),class:(0,g.C_)([{active:t.item.added>0||t.item.isPrevOrder},"primary addToCart amount"])},[S,(0,n.Uk)(" "+(0,g.zw)(t.item.price.toFixed(2)),1)],2),(0,n.wy)((0,n._)("div",M,[(0,n._)("b",null,(0,g.zw)(t.item.added),1),(0,n.Uk)(" Added"),A,(0,n.Uk)("in Order ")],512),[[o.F8,t.item.added>0]]),(0,n._)("div",{onClick:e[3]||(e[3]=function(e){return t.removeOrderItem(t.item.id)}),class:"trash"},[(0,n.wy)((0,n.Wm)(s,{icon:"trash"},null,512),[[o.F8,t.item.added>0]])])])])])]),(0,n._)("div",x,[(0,n._)("div",H,[(0,n._)("p",null,[(0,n.Uk)(" Total "),(0,n._)("span",null,"RM "+(0,g.zw)(t.totalAmount.toFixed(2)),1)])]),(0,n._)("div",{onClick:e[4]||(e[4]=function(e){return t.addToOrder(t.item.id)}),class:"cta"},"Add")])])):(0,n.kq)("",!0)]})),_:1})}var T=(0,n.aZ)({props:["diplayItemId","items","totalAmount"],emits:["closeItemDetail","addToOrder","removeOrderItem"],data:function(){return{item:{}}},methods:{addToOrder:function(t){var e=this;this.$emit("addToOrder",{id:t,qty:1}),setTimeout((function(){e.close()}),500)},close:function(){this.$emit("closeItemDetail")},removeOrderItem:function(t){var e=this;this.$emit("removeOrderItem",t),setTimeout((function(){e.close()}),500)}},watch:{diplayItemId:function(t){null!==t&&(this.item=this.items.find((function(e){return e.id===t})))}}}),F=r(744);const P=(0,F.Z)(T,[["render",E],["__scopeId","data-v-eefef904"]]);var z=P,j=function(t){return(0,n.dD)("data-v-f28ffc32"),t=t(),(0,n.Cn)(),t},q={class:"footer"},N=j((function(){return(0,n._)("span",null,"Home",-1)})),U=j((function(){return(0,n._)("span",null,"Order",-1)})),W=j((function(){return(0,n._)("span",null,"Info",-1)})),R={class:"total"};function $(t,e,r,i,a,d){var s=(0,n.up)("font-awesome-icon"),c=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",q,[(0,n.Wm)(c,{to:{name:"home"},class:"nav"},{default:(0,n.w5)((function(){return[(0,n.Wm)(s,{icon:"house"}),N]})),_:1}),(0,n.Wm)(c,{to:{name:"orderList"},class:"nav"},{default:(0,n.w5)((function(){return[(0,n.Wm)(s,{icon:"square-check"}),U,(0,n.wy)((0,n._)("div",{class:"count"},(0,g.zw)(t.totalQty),513),[[o.F8,t.totalQty>0]])]})),_:1}),(0,n.Wm)(c,{to:{name:"info"},class:"nav"},{default:(0,n.w5)((function(){return[(0,n.Wm)(s,{icon:"circle-info"}),W]})),_:1}),(0,n._)("div",R,[(0,n._)("p",null,[(0,n.Uk)(" Total "),(0,n._)("span",null,"RM "+(0,g.zw)(t.totalAmount.toFixed(2)),1)])]),(0,n._)("button",{onClick:e[0]||(e[0]=function(e){return t.showOrderListModal(!0)}),class:(0,g.C_)([{disabled:0===t.totalQty},"nav cta"])}," Order Now ",2)])}var Z=(0,n.aZ)({props:["orderList","totalAmount"],emits:["showOrderList","showOrderListModal"],computed:{totalQty:function(){return this.orderList.reduce((function(t,e){return t+e.added}),0)}},methods:{showOrderList:function(){this.$emit("showOrderList",!0)},showOrderListModal:function(t){this.$emit("showOrderListModal",t)}}});const B=(0,F.Z)(Z,[["render",$],["__scopeId","data-v-f28ffc32"]]);var K=B,J=function(t){return(0,n.dD)("data-v-15c53678"),t=t(),(0,n.Cn)(),t},Y={class:"overlayContainer"},Q=J((function(){return(0,n._)("div",{class:"overlay"},null,-1)})),G={class:"alignCenter"},V={class:"container"},X={class:"header"},tt=J((function(){return(0,n._)("div",{class:"left"},null,-1)})),et=J((function(){return(0,n._)("h3",{class:"title"},"Order",-1)})),rt={class:"rows"},ot={key:0,class:"groupTitle"},nt=["src"],it={key:1,src:"https://via.placeholder.com/72/EFEFEF/8E8E8E?text=menupanda",class:"image"},at={class:"info"},dt={class:"content"},st={class:"title"},ct={class:"qty"},ut={class:"amount"},lt=["onClick"],mt={key:0,class:"orderHistory"},ft={class:"groupTitle"},ht=["src"],pt={key:1,src:"https://via.placeholder.com/72/EFEFEF/8E8E8E?text=menupanda",class:"image"},vt={class:"info"},gt={class:"content"},wt={class:"title"},yt={class:"qty"},Ot={class:"amount"},_t={class:"footer"},Ct=J((function(){return(0,n._)("dt",null,"Subtotal",-1)})),It={key:0},Dt={key:1},Lt={key:2},bt={key:3},kt=J((function(){return(0,n._)("dt",null,"Rouding Adj",-1)})),St=J((function(){return(0,n._)("dt",null,"Total",-1)})),Mt={key:1,class:"CTAButton loading"};function At(t,e,r,i,a,d){var s=(0,n.up)("font-awesome-icon");return(0,n.wg)(),(0,n.j4)(o.uT,{name:"show"},{default:(0,n.w5)((function(){return[(0,n.wy)((0,n._)("div",Y,[Q,(0,n._)("div",G,[(0,n._)("div",V,[(0,n._)("div",X,[tt,et,(0,n._)("button",{onClick:e[0]||(e[0]=function(e){return t.showOrderListModal(!1)}),class:"transparent button"},[(0,n.Wm)(s,{icon:"xmark"})])]),(0,n._)("div",rt,[(0,n._)("div",{class:(0,g.C_)({currentOrder:t.orderHistory})},[t.orderHistory?((0,n.wg)(),(0,n.iD)("p",ot,"Current Order")):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.orderList,(function(e){return(0,n.wg)(),(0,n.iD)("div",{key:e.id,class:"row"},[e.image?((0,n.wg)(),(0,n.iD)("img",{key:0,src:e.image+"=w120",class:"image"},null,8,nt)):((0,n.wg)(),(0,n.iD)("img",it)),(0,n._)("div",at,[(0,n._)("div",dt,[(0,n._)("p",st,(0,g.zw)(e.code)+". "+(0,g.zw)(e.name),1)]),(0,n._)("div",ct,"x"+(0,g.zw)(e.added),1),(0,n._)("div",ut,(0,g.zw)((e.price*e.added).toFixed(2)),1),(0,n._)("button",{onClick:function(r){return t.removeOrderItem(e.id)},class:(0,g.C_)([{disabled:t.isShowOrderListModalLoading},"transparent button"])},[(0,n.Wm)(s,{icon:"trash"})],10,lt)])])})),128))],2),t.orderHistory?((0,n.wg)(),(0,n.iD)("div",mt,[(0,n._)("p",ft,[(0,n.Uk)(" Previous Order #"+(0,g.zw)(t.padStart(t.orderHistory.orderId))+" ",1),(0,n._)("span",null,"[ "+(0,g.zw)(t.orderHistory.status)+" ]",1)]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.orderHistory.items,(function(t){return(0,n.wg)(),(0,n.iD)("div",{key:t.id,class:"row"},[t.image?((0,n.wg)(),(0,n.iD)("img",{key:0,src:t.image+"=w120",class:"image"},null,8,ht)):((0,n.wg)(),(0,n.iD)("img",pt)),(0,n._)("div",vt,[(0,n._)("div",gt,[(0,n._)("p",wt,(0,g.zw)(t.code)+". "+(0,g.zw)(t.name),1)]),(0,n._)("div",yt,"x"+(0,g.zw)(t.added),1),(0,n._)("div",Ot,(0,g.zw)((t.price*t.added).toFixed(2)),1)])])})),128))])):(0,n.kq)("",!0)]),(0,n._)("div",_t,[(0,n._)("dl",null,[Ct,(0,n._)("dd",null,(0,g.zw)(t.totalAmount.toFixed(2)),1),t.systemData.serviceCharge10Percent?((0,n.wg)(),(0,n.iD)("dt",It," Servic Charge 10% ")):(0,n.kq)("",!0),t.systemData.serviceCharge10Percent?((0,n.wg)(),(0,n.iD)("dd",Dt,(0,g.zw)(t.serviceCharge.toFixed(2)),1)):(0,n.kq)("",!0),t.systemData.tax6Percent?((0,n.wg)(),(0,n.iD)("dt",Lt,"Tax 6%")):(0,n.kq)("",!0),t.systemData.tax6Percent?((0,n.wg)(),(0,n.iD)("dd",bt,(0,g.zw)(t.tax.toFixed(2)),1)):(0,n.kq)("",!0),kt,(0,n._)("dd",null,(0,g.zw)(t.roundingAdj.toFixed(2)),1),St,(0,n._)("dd",null,"RM "+(0,g.zw)(t.nettTotal.toFixed(2)),1)])]),t.isShowOrderListModalLoading?((0,n.wg)(),(0,n.iD)("button",Mt,[(0,n.Uk)(" Submit "),(0,n.Wm)(s,{icon:"spinner"})])):((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:e[1]||(e[1]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.confirmOrder&&t.confirmOrder.apply(t,e)}),class:"CTAButton"},(0,g.zw)(t.orderHistory?"Combine":"Confirm"),1))])])],512),[[o.F8,t.isShowOrderListModal]])]})),_:1})}var xt=r(655);function Ht(t){return t.toString().padStart(2,"0")}function Et(t){return[Ht(t.getDate()),Ht(t.getMonth()+1),t.getFullYear()].join("/")+" "+[Ht(t.getHours()),Ht(t.getMinutes()),Ht(t.getSeconds())].join(":")}function Tt(t){var e=t.substring(5,t.length-1),r=e.split(",");return new Date(+r[0],+r[1],+r[2],+r[3],+r[4],+r[5])}function Ft(t){var e=t.toFixed(2),r=parseInt(e.substring(e.length-1,e.length));return 0===r?0:r<=4?r/100*-1:(10-r)/100}function Pt(t){return t.toString().padStart(3,"0")}function zt(t){var e=t.includes("drive.google.com");if(e){var r=t.split("/");return"https://lh3.google.com/u/0/d/".concat(r[5])}return t}var jt=(0,n.aZ)({props:["isShowOrderListModal","orderList","totalAmount","systemData","isShowOrderListModalLoading","orderHistory"],emits:["showOrderListModal","removeOrderItem","updateCustomerInfo","orderSubmitted","showOrderListModalLoading"],computed:{serviceCharge:function(){return this.systemData.serviceCharge10Percent?.1*this.totalAmount:0},tax:function(){return this.systemData.tax6Percent?.06*this.totalAmount:0},roundingAdj:function(){var t=parseFloat(this.serviceCharge.toFixed(2)),e=parseFloat(this.tax.toFixed(2));return Ft(this.totalAmount+t+e)},nettTotal:function(){return this.totalAmount+this.serviceCharge+this.tax+this.roundingAdj}},methods:{showOrderListModal:function(t){this.$emit("showOrderListModal",t)},removeOrderItem:function(t){this.$emit("removeOrderItem",t),0===this.orderList.length&&this.showOrderListModal(!1)},confirmOrder:function(){this.$emit("showOrderListModalLoading",!0),this.$emit("updateCustomerInfo");var t=h.post,e={};if(this.orderHistory){var r=(0,xt.pi)({},this.orderHistory.items[0]).addedList.map((function(){return 0}));this.orderHistory.items.forEach((function(t){return t.addedList.push(0)})),console.log(r);var o=(0,xt.ev)([],this.orderHistory.items,!0);(0,xt.ev)([],this.orderList,!0).reverse().forEach((function(t){var e=o.filter((function(e){return e.id===t.id}))[0];e?(e.addedList.pop(),e.addedList.push(t.added)):(t.addedList=(0,xt.ev)([],r,!0),t.addedList.push(t.added),o.unshift(t))})),o.map((function(t){var e=(0,xt.pi)({},t);return e.added=t.addedList.reduce((function(t,e){return t+e}),0),e})),t=h.update,e={id:this.orderHistory.id,orderId:this.orderHistory.orderId,status:this.orderHistory.status,tableNo:0,items:JSON.stringify(o),amount:parseFloat(this.nettTotal.toFixed(2)),createdDate:Et(new Date(Tt(this.orderHistory.createdDate))),deviceId:this.orderHistory.deviceId,note:this.orderHistory.note}}else this.orderList.forEach((function(t){t.addedList=[t.added]})),e={id:0,status:m.waiting,tableNo:0,items:JSON.stringify(this.orderList),amount:parseFloat(this.nettTotal.toFixed(2)),createdDate:Et(new Date),deviceId:0,note:""};this.$emit("orderSubmitted",{order:e,postOrUpdate:t})},padStart:function(t){return Pt(t)}}});const qt=(0,F.Z)(jt,[["render",At],["__scopeId","data-v-15c53678"]]);var Nt=qt,Ut=function(t){return(0,n.dD)("data-v-3dab15dc"),t=t(),(0,n.Cn)(),t},Wt={class:"overlayContainer"},Rt=Ut((function(){return(0,n._)("div",{class:"overlay"},null,-1)})),$t={class:"alignCenter"},Zt={class:"container"},Bt={class:"content"},Kt=Ut((function(){return(0,n._)("p",null,"Your order has been submit.",-1)}));function Jt(t,e,r,i,a,d){return(0,n.wg)(),(0,n.j4)(o.uT,{name:"show"},{default:(0,n.w5)((function(){return[(0,n.wy)((0,n._)("div",Wt,[Rt,(0,n._)("div",$t,[(0,n._)("div",Zt,[(0,n._)("div",Bt,[(0,n._)("h2",null,"Order #"+(0,g.zw)(t.padStart(t.orderId)),1),Kt]),(0,n._)("button",{onClick:e[0]||(e[0]=function(e){return t.showAlertModal(!1)})},"Close")])])],512),[[o.F8,t.isShowAlertModal]])]})),_:1})}var Yt=(0,n.aZ)({props:["isShowAlertModal","orderId"],emits:["showAlertModal"],methods:{padStart:function(t){return Pt(t)},showAlertModal:function(t){this.$emit("showAlertModal",t),setTimeout((function(){window.location.reload()}),1e3)}}});const Qt=(0,F.Z)(Yt,[["render",Jt],["__scopeId","data-v-3dab15dc"]]);var Gt=Qt,Vt=function(t){return(0,n.dD)("data-v-791fd08a"),t=t(),(0,n.Cn)(),t},Xt={key:0,class:"overlayContainer"},te=Vt((function(){return(0,n._)("div",{class:"overlay"},null,-1)})),ee={class:"alignCenter"},re={class:"container"},oe={class:"content"},ne={class:"rows"},ie=["src"],ae={key:1,src:"https://via.placeholder.com/72/EFEFEF/8E8E8E?text=menupanda",class:"image"},de={class:"info"},se={class:"content"},ce={class:"title"},ue={class:"qty"},le={class:"amount"},me={class:"footer"},fe=Vt((function(){return(0,n._)("div",{class:"blur"},null,-1)})),he=Vt((function(){return(0,n._)("dt",null,"Subtotal",-1)})),pe={key:0},ve={key:1},ge={key:2},we={key:3},ye=Vt((function(){return(0,n._)("dt",null,"Rouding Adj",-1)})),Oe=Vt((function(){return(0,n._)("dt",null,"Total",-1)}));function _e(t,e,r,i,a,d){return(0,n.wg)(),(0,n.j4)(o.uT,{name:"show"},{default:(0,n.w5)((function(){return[t.isShowOrderHistoryModal?((0,n.wg)(),(0,n.iD)("div",Xt,[te,(0,n._)("div",ee,[(0,n._)("div",re,[(0,n._)("div",oe,[(0,n._)("h2",null,[(0,n.Uk)(" Order #"+(0,g.zw)(t.padStart(t.orderHistory.orderId))+" ",1),(0,n._)("span",null,"[ "+(0,g.zw)(t.orderHistory.status)+" ]",1)]),(0,n._)("p",null,"Your order has been "+(0,g.zw)(t.orderHistory.status)+".",1)]),(0,n._)("div",ne,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.orderHistory.items,(function(t){return(0,n.wg)(),(0,n.iD)("div",{key:t.id,class:"row"},[t.image?((0,n.wg)(),(0,n.iD)("img",{key:0,src:t.image+"=w120",class:"image"},null,8,ie)):((0,n.wg)(),(0,n.iD)("img",ae)),(0,n._)("div",de,[(0,n._)("div",se,[(0,n._)("p",ce,(0,g.zw)(t.code)+". "+(0,g.zw)(t.name),1)]),(0,n._)("div",ue,"x"+(0,g.zw)(t.added),1),(0,n._)("div",le,(0,g.zw)((t.price*t.added).toFixed(2)),1)])])})),128))]),(0,n._)("div",me,[fe,(0,n._)("dl",null,[he,(0,n._)("dd",null,(0,g.zw)(t.totalAmount.toFixed(2)),1),t.systemData.serviceCharge10Percent?((0,n.wg)(),(0,n.iD)("dt",pe," Servic Charge 10% ")):(0,n.kq)("",!0),t.systemData.serviceCharge10Percent?((0,n.wg)(),(0,n.iD)("dd",ve,(0,g.zw)(t.serviceCharge.toFixed(2)),1)):(0,n.kq)("",!0),t.systemData.tax6Percent?((0,n.wg)(),(0,n.iD)("dt",ge,"Tax 6%")):(0,n.kq)("",!0),t.systemData.tax6Percent?((0,n.wg)(),(0,n.iD)("dd",we,(0,g.zw)(t.tax.toFixed(2)),1)):(0,n.kq)("",!0),ye,(0,n._)("dd",null,(0,g.zw)(t.roundingAdj.toFixed(2)),1),Oe,(0,n._)("dd",null,"RM "+(0,g.zw)(t.nettTotal.toFixed(2)),1)])]),(0,n._)("button",{onClick:e[0]||(e[0]=function(e){return t.showOrderHistoryModal(!1)})},"I understand")])])])):(0,n.kq)("",!0)]})),_:1})}var Ce=(0,n.aZ)({props:["isShowOrderHistoryModal","orderHistory","systemData"],emits:["showOrderHistoryModal"],computed:{totalAmount:function(){return this.orderHistory.items.reduce((function(t,e){return t+=e.price*e.added,t}),0)},serviceCharge:function(){return this.systemData.serviceCharge10Percent?.1*this.totalAmount:0},tax:function(){return this.systemData.tax6Percent?.06*this.totalAmount:0},roundingAdj:function(){var t=parseFloat(this.serviceCharge.toFixed(2)),e=parseFloat(this.tax.toFixed(2));return Ft(this.totalAmount+t+e)},nettTotal:function(){return this.totalAmount+this.serviceCharge+this.tax+this.roundingAdj}},methods:{padStart:function(t){return Pt(t)},showOrderHistoryModal:function(t){this.$emit("showOrderHistoryModal",t)}}});const Ie=(0,F.Z)(Ce,[["render",_e],["__scopeId","data-v-791fd08a"]]);var De,Le=Ie;function be(t){var e=JSON.stringify(t);localStorage.setItem(De.menuPandaCustomerInfo,e)}function ke(){return JSON.parse(localStorage.getItem(De.menuPandaCustomerInfo))}function Se(t){var e=JSON.stringify(t);localStorage.setItem(De.menuPandaOrderHistory,e)}function Me(){return JSON.parse(localStorage.getItem(De.menuPandaOrderHistory))}function Ae(){localStorage.removeItem(De.menuPandaOrderHistory)}function xe(t,e,r,o){var n={};for(var i in o)n[i]=typeof o[i];var a={crud:t,sheet:e,data:o,dataType:n},d=fetch("https://script.google.com/macros/s/".concat(r,"/exec"),{method:"POST",mode:"no-cors",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow",body:JSON.stringify(a)});return d}function He(t,e,r){var o={};for(var n in r)o[n]=typeof r[n];var i={type:t,data:r,dataType:o},a=fetch("https://script.google.com/macros/s/".concat(e,"/exec"),{method:"POST",mode:"no-cors",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow",body:JSON.stringify(i)});return a}(function(t){t["menuPandaCustomerInfo"]="menuPandaCustomerInfo",t["menuPandaOrderHistory"]="menuPandaOrderHistory"})(De||(De={}));var Ee=(0,n.aZ)({components:{ItemDetailComponent:z,FooterComponent:K,OrderListModalComponent:Nt,AlertModalComponent:Gt,OrderHistoryModalComponent:Le},setup:function(){var t,e=(0,n.FN)().proxy,r=(0,p.iH)({url:e.$getUrl,fetchCode:e.$fetchCode}),o=(0,p.iH)({id:1,companyName:"...",companyAddress:"",companyContact:"",companyDescription:"",serviceCharge10Percent:!1,tax6Percent:!1}),i=(0,p.iH)([{id:1,image:"",description:"",itemId:0}]),a=(0,p.iH)([]),d=(0,p.iH)([]),s=(0,p.iH)(),c=(0,p.iH)([]),u=(0,p.iH)(),l=(0,p.iH)(!0),h=fetch("".concat(r.value.url,"tqx=out:json&sheet=Categories")),g=fetch("".concat(r.value.url,"tqx=out:json&sheet=Banners")),w=fetch("".concat(r.value.url,"tqx=out:json&sheet=Items")),y=fetch("".concat(r.value.url,"tqx=out:json&sheet=System")),O=ke();return O&&(t=fetch("".concat(r.value.url,"sheet=Orders&tq=").concat(encodeURIComponent("select * where K = ")).concat(O.deviceId," and C != ").concat(encodeURIComponent('"'.concat(m.completed,'"')))),u.value=O),Promise.all([h,g,t,w,y]).then((function(t){t[0].text().then((function(e){var o=v(e);o.forEach((function(t){return t.items=[]})),t[1].text().then((function(e){var n=v(e);t[2]&&t[2].text().then((function(e){var u=v(e)[0];t[3].text().then((function(t){var e=v(t),h=Me(),p=[];if(u){var g=Tt(u.createdDate),w=((new Date).getTime()-g.getTime())/1e3/60;w<120?u.items=JSON.parse(u.items):(u.status=m.completed,u.note='Error! Status updated to "Completed" due to order over 2 hours!',u.createdDate=Et(new Date(Tt(u.createdDate))),console.log("auto update item status"),xe(f.update,"Orders",r.value.fetchCode,u),u=null)}e.forEach((function(t){var e=o.find((function(e){return e.name===t.category}));t.added=0,t.image=zt(t.image),e.items.push(t),n.forEach((function(e){e.image=zt(e.image),e.itemId===t.id&&(e.item=t)})),u&&u.items.forEach((function(e){e.id===t.id&&(t.isPrevOrder=!0)})),h&&h.forEach((function(e){e.id===t.id&&(t.added=e.added,p.push(t))}))})),a.value=o,i.value=n,s.value=u,c.value=p,d.value=e,l.value=!1}))}))}))})),t[4].text().then((function(t){o.value=v(t)[0],window.document.title="".concat(o.value.companyName," - Menu Panda")}))})),{proxyData:r,systemData:o,banners:i,categories:a,orderHistory:s,items:d,orderList:c,customerInfo:u,isLoading:l}},data:function(){return{diplayItemId:null,isShowOrderListModal:!1,isShowOrderListModalLoading:!1,isShowAlertModal:!1,isShowOrderHistoryModal:!1,orderId:0}},computed:{totalAmount:function(){var t=0;return t=this.orderList.reduce((function(t,e){return t+e.price*e.added}),0),this.orderHistory&&(t+=this.orderHistory.items.reduce((function(t,e){return t+e.price*e.added}),0)),t}},methods:{showItemDetail:function(t){this.diplayItemId=t},closeItemDetail:function(){this.diplayItemId=null},addToOrder:function(t){var e=this,r=this.items.find((function(e){return e.id===t.id}));r.added+=t.qty;var o=this.orderList.find((function(e){return e.id===t.id}));o||this.orderList.unshift(r),this.orderList.forEach((function(r,o){r.id===t.id&&0===r.added&&e.orderList.splice(o,1)})),Se(this.orderList)},showOrderListModal:function(t){this.isShowOrderListModal=t},removeOrderItem:function(t){this.items.find((function(e){return e.id===t})).added=0;var e=this.orderList.findIndex((function(e){return e.id===t}));this.orderList.splice(e,1),this.orderList.length>0?Se(this.orderList):Ae()},updateCustomerInfo:function(){var t=ke();t||(t={deviceId:Date.now()},be(t)),this.customerInfo=t},orderSubmitted:function(t){var e=this;this.isShowOrderListModalLoading=!0,t.order.deviceId=this.customerInfo.deviceId,t.postOrUpdate===h.post?He("createOrder",this.proxyData.fetchCode,t.order).then((function(){Ae(),fetch("".concat(e.proxyData.url,"sheet=Orders&tq=").concat(encodeURIComponent("select * where K = ")).concat(e.customerInfo.deviceId," and C = ").concat(encodeURIComponent('"'.concat(m.waiting,'"')))).then((function(t){return t.text()})).then((function(t){e.isShowOrderListModalLoading=!1,e.orderId=v(t)[0].orderId,setTimeout((function(){e.isShowOrderListModal=!1,e.orderList=[],e.items.forEach((function(t){return t.added=0}))}),1e3),setTimeout((function(){e.isShowAlertModal=!0}),2e3)}))})).catch((function(){alert("Error! Submit fail, please inform waiters and order manually!")})):xe(f.update,"Orders",this.proxyData.fetchCode,t.order).then((function(){Ae(),e.orderId=e.orderHistory.orderId,setTimeout((function(){e.isShowOrderListModal=!1,e.orderList=[],e.items.forEach((function(t){return t.added=0}))}),1e3),setTimeout((function(){e.isShowAlertModal=!0}),2e3)})).catch((function(){alert("Error! Submit fail, please inform waiters and order manually!")}))},showOrderListModalLoading:function(t){this.isShowOrderListModalLoading=t},showAlertModal:function(t){this.isShowAlertModal=t},showOrderHistoryModal:function(t){this.isShowOrderHistoryModal=t}},watch:{orderHistory:function(t){var e=this;null!==t&&setTimeout((function(){e.isShowOrderHistoryModal=!0}),1e3)}}});const Te=(0,F.Z)(Ee,[["render",l]]);var Fe=Te,Pe=r(201),ze=function(t){return(0,n.dD)("data-v-74efdccb"),t=t(),(0,n.Cn)(),t},je={class:"host"},qe={class:"header"},Ne={class:"companyName"},Ue={class:"banners"},We=["src","alt"],Re={key:1,src:"https://via.placeholder.com/360/EFEFEF/8E8E8E?text=menupanda",class:"placeholder"},$e={key:2,class:"contentAbsolute"},Ze={class:"row"},Be=["onClick"],Ke=["src"],Je={key:1,src:"https://via.placeholder.com/120/EFEFEF/8E8E8E?text=menupanda"},Ye={class:"content"},Qe={class:"title"},Ge={class:"description truncate"},Ve={class:"right"},Xe=["onClick"],tr=ze((function(){return(0,n._)("span",null,"RM",-1)})),er={class:"addedContent"},rr=ze((function(){return(0,n._)("div",{class:"lineArea"},[(0,n._)("div",{class:"line"})],-1)})),or={key:0},nr={class:"header"},ir={class:"title"},ar={class:"pages"},dr=["onClick"],sr=["src"],cr={key:1,src:"https://via.placeholder.com/120/EFEFEF/8E8E8E?text=menupanda"},ur={class:"content"},lr={class:"title"},mr={class:"description truncate"},fr={class:"right"},hr=["onClick"],pr=ze((function(){return(0,n._)("span",null,"RM",-1)})),vr={class:"addedContent"},gr=["onClick"];function wr(t,e,r,i,a,d){var s=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",je,[(0,n._)("div",qe,[(0,n._)("h2",Ne,(0,g.zw)(t.systemData.companyName),1)]),(0,n._)("div",Ue,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.banners,(function(e){return(0,n.wg)(),(0,n.iD)("div",{key:e.id,class:"banner"},[""!==e.image?((0,n.wg)(),(0,n.iD)("img",{key:0,src:e.image+"=w800",alt:e.description},null,8,We)):((0,n.wg)(),(0,n.iD)("img",Re)),e.item?((0,n.wg)(),(0,n.iD)("div",$e,[(0,n._)("div",{class:"blurBg",style:(0,g.j5)({backgroundImage:"url("+e.image+"=w800)"})},null,4),(0,n._)("div",Ze,[(0,n._)("div",{onClick:function(r){return t.showItemDetail(e.item.id)},class:"nav"},[e.item.image?((0,n.wg)(),(0,n.iD)("img",{key:0,src:e.item.image+"=w800"},null,8,Ke)):((0,n.wg)(),(0,n.iD)("img",Je)),(0,n._)("div",Ye,[(0,n._)("p",Qe,(0,g.zw)(e.item.name),1),(0,n._)("p",Ge,(0,g.zw)(e.item.code)+". "+(0,g.zw)(e.item.description),1)])],8,Be),(0,n._)("div",Ve,[(0,n._)("button",{onClick:function(r){return t.addToOrder(e.item.id)},class:(0,g.C_)([{active:e.item.added>0||e.item.isPrevOrder},"primary addToCart amount"])},[tr,(0,n.Uk)(" "+(0,g.zw)(e.item.price.toFixed(2)),1)],10,Xe),(0,n.wy)((0,n._)("div",er," Added ",512),[[o.F8,e.item.added>0]])])])])):(0,n.kq)("",!0)])})),128))]),rr,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.categories,(function(e){return(0,n.wg)(),(0,n.iD)("div",{key:e.id,class:"category"},[e.items.length>0?((0,n.wg)(),(0,n.iD)("section",or,[(0,n._)("div",nr,[(0,n._)("h2",ir,(0,g.zw)(e.name),1),(0,n.Wm)(s,{to:{name:"category",params:{categoryId:e.id}},class:"button transparent getMore"},{default:(0,n.w5)((function(){return[(0,n.Uk)(" See All ")]})),_:2},1032,["to"])]),(0,n._)("div",ar,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.toPages(e.items),(function(e,r){return(0,n.wg)(),(0,n.iD)("div",{key:r,class:"page"},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e,(function(e,r){return(0,n.wg)(),(0,n.iD)("div",{key:r,class:"row"},[(0,n._)("div",{onClick:function(r){return t.showItemDetail(e.id)},class:"nav"},[e.image?((0,n.wg)(),(0,n.iD)("img",{key:0,src:e.image+"=w120"},null,8,sr)):((0,n.wg)(),(0,n.iD)("img",cr)),(0,n._)("div",ur,[(0,n._)("p",lr,(0,g.zw)(e.name),1),(0,n._)("p",mr,(0,g.zw)(e.code)+". "+(0,g.zw)(e.description),1)])],8,dr),(0,n._)("div",fr,[(0,n._)("button",{onClick:function(r){return t.addToOrder(e.id)},class:(0,g.C_)([{active:e.added>0||e.isPrevOrder},"primary addToCart amount"])},[pr,(0,n.Uk)(" "+(0,g.zw)(e.price.toFixed(2)),1)],10,hr),(0,n.wy)((0,n._)("div",vr,[(0,n._)("b",null,(0,g.zw)(e.added),1),(0,n.Uk)(" Added / "),(0,n._)("span",{onClick:function(r){return t.removeOrderItem(e.id)}},"Remove",8,gr)],512),[[o.F8,e.added>0]])])])})),128))])})),128))])])):(0,n.kq)("",!0)])})),128))])}var yr=(0,n.aZ)({props:["systemData","banners","categories"],emits:["showItemDetail","addToOrder","removeOrderItem"],mounted:function(){window.document.title="".concat(this.systemData.companyName," - Menu Panda")},methods:{toPages:function(t){for(var e=[],r=null,o=0;o<t.length;o++)o%3===0&&(e.push([]),r=Math.floor(o/3)),e[r].push(t[o]);return e},showItemDetail:function(t){this.$emit("showItemDetail",t)},addToOrder:function(t){this.$emit("addToOrder",{id:t,qty:1})},removeOrderItem:function(t){this.$emit("removeOrderItem",t)}}});const Or=(0,F.Z)(yr,[["render",wr],["__scopeId","data-v-74efdccb"]]);var _r=Or,Cr="Menu Panda",Ir=[{path:"/",name:"home",component:_r,meta:{scrollPos:{top:0,left:0}}},{path:"/c/:categoryId",name:"category",component:function(){return r.e(633).then(r.bind(r,633))}},{path:"/o",name:"orderList",component:function(){return r.e(190).then(r.bind(r,648))},meta:{title:"Order - ".concat(Cr)}},{path:"/i",name:"info",component:function(){return r.e(893).then(r.bind(r,893))},meta:{title:"Info - ".concat(Cr)}}],Dr=function(t,e,r){var o,n;if(t.name===e.name)return(null===(o=t.meta)||void 0===o?void 0:o.scrollPos)&&(t.meta.scrollPos.top=0),{left:0,top:0};var i=r||(null===(n=t.meta)||void 0===n?void 0:n.scrollPos)||{left:0,top:0};return new Promise((function(t,e){setTimeout((function(){t(i)}),500)}))},Lr=(0,Pe.p7)({history:(0,Pe.r5)(),routes:Ir,scrollBehavior:Dr});Lr.beforeEach((function(t,e,r){var o;return"string"===typeof t.meta.title&&(window.document.title=t.meta.title),(null===(o=e.meta)||void 0===o?void 0:o.scrollPos)&&(e.meta.scrollPos.top=document.documentElement.scrollTop),r()}));var br=Lr,kr=r(810),Sr=r(636),Mr=r(417);Sr.vI.add(Mr.mRB);var Ar=(0,o.ri)(Fe);Ar.config.globalProperties.$getUrl="https://docs.google.com/spreadsheets/d/1_ARt4Am1LxWkPghf6VmMdAnhA2DDEmwtd4mynuM_NAM/gviz/tq?",Ar.config.globalProperties.$fetchCode="AKfycbxNXCC5iYKxIN7tEzyWIfmB259p3GgmlU_qbfSmS1JmdLwDn40qkLI7jumQBWLy7O1jRw",Ar.use(br),Ar.component("font-awesome-icon",kr.GN),Ar.mount("#app")}},e={};function r(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,r),i.exports}r.m=t,function(){var t=[];r.O=function(e,o,n,i){if(!o){var a=1/0;for(u=0;u<t.length;u++){o=t[u][0],n=t[u][1],i=t[u][2];for(var d=!0,s=0;s<o.length;s++)(!1&i||a>=i)&&Object.keys(r.O).every((function(t){return r.O[t](o[s])}))?o.splice(s--,1):(d=!1,i<a&&(a=i));if(d){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[o,n,i]}}(),function(){r.d=function(t,e){for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){r.f={},r.e=function(t){return Promise.all(Object.keys(r.f).reduce((function(e,o){return r.f[o](t,e),e}),[]))}}(),function(){r.u=function(t){return"js/"+t+"."+{190:"b501ce05",633:"2efbc4a0",893:"fe29bbb1"}[t]+".js"}}(),function(){r.miniCssF=function(t){return"css/"+t+"."+{190:"72120b2e",633:"91e0ffe7",893:"5af8ff3c"}[t]+".css"}}(),function(){r.miniCssF=function(t){return t+".css"}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="menupanda2:";r.l=function(o,n,i,a){if(t[o])t[o].push(n);else{var d,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var l=c[u];if(l.getAttribute("src")==o||l.getAttribute("data-webpack")==e+i){d=l;break}}d||(s=!0,d=document.createElement("script"),d.charset="utf-8",d.timeout=120,r.nc&&d.setAttribute("nonce",r.nc),d.setAttribute("data-webpack",e+i),d.src=o),t[o]=[n];var m=function(e,r){d.onerror=d.onload=null,clearTimeout(f);var n=t[o];if(delete t[o],d.parentNode&&d.parentNode.removeChild(d),n&&n.forEach((function(t){return t(r)})),e)return e(r)},f=setTimeout(m.bind(null,void 0,{type:"timeout",target:d}),12e4);d.onerror=m.bind(null,d.onerror),d.onload=m.bind(null,d.onload),s&&document.head.appendChild(d)}}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.p=""}(),function(){var t=function(t,e,r,o){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css";var i=function(i){if(n.onerror=n.onload=null,"load"===i.type)r();else{var a=i&&("load"===i.type?"missing":i.type),d=i&&i.target&&i.target.href||e,s=new Error("Loading CSS chunk "+t+" failed.\n("+d+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=a,s.request=d,n.parentNode.removeChild(n),o(s)}};return n.onerror=n.onload=i,n.href=e,document.head.appendChild(n),n},e=function(t,e){for(var r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var n=r[o],i=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(i===t||i===e))return n}var a=document.getElementsByTagName("style");for(o=0;o<a.length;o++){n=a[o],i=n.getAttribute("data-href");if(i===t||i===e)return n}},o=function(o){return new Promise((function(n,i){var a=r.miniCssF(o),d=r.p+a;if(e(a,d))return n();t(o,d,n,i)}))},n={143:0};r.f.miniCss=function(t,e){var r={190:1,633:1,893:1};n[t]?e.push(n[t]):0!==n[t]&&r[t]&&e.push(n[t]=o(t).then((function(){n[t]=0}),(function(e){throw delete n[t],e})))}}(),function(){var t=function(t,e,r,o){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css";var i=function(i){if(n.onerror=n.onload=null,"load"===i.type)r();else{var a=i&&("load"===i.type?"missing":i.type),d=i&&i.target&&i.target.href||e,s=new Error("Loading CSS chunk "+t+" failed.\n("+d+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=a,s.request=d,n.parentNode.removeChild(n),o(s)}};return n.onerror=n.onload=i,n.href=e,document.head.appendChild(n),n},e=function(t,e){for(var r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var n=r[o],i=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(i===t||i===e))return n}var a=document.getElementsByTagName("style");for(o=0;o<a.length;o++){n=a[o],i=n.getAttribute("data-href");if(i===t||i===e)return n}},o=function(o){return new Promise((function(n,i){var a=r.miniCssF(o),d=r.p+a;if(e(a,d))return n();t(o,d,n,i)}))},n={143:0};r.f.miniCss=function(t,e){var r={190:1,633:1,893:1};n[t]?e.push(n[t]):0!==n[t]&&r[t]&&e.push(n[t]=o(t).then((function(){n[t]=0}),(function(e){throw delete n[t],e})))}}(),function(){var t={143:0};r.f.j=function(e,o){var n=r.o(t,e)?t[e]:void 0;if(0!==n)if(n)o.push(n[2]);else{var i=new Promise((function(r,o){n=t[e]=[r,o]}));o.push(n[2]=i);var a=r.p+r.u(e),d=new Error,s=function(o){if(r.o(t,e)&&(n=t[e],0!==n&&(t[e]=void 0),n)){var i=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.src;d.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",d.name="ChunkLoadError",d.type=i,d.request=a,n[1](d)}};r.l(a,s,"chunk-"+e,e)}},r.O.j=function(e){return 0===t[e]};var e=function(e,o){var n,i,a=o[0],d=o[1],s=o[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(n in d)r.o(d,n)&&(r.m[n]=d[n]);if(s)var u=s(r)}for(e&&e(o);c<a.length;c++)i=a[c],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(u)},o=self["webpackChunkmenupanda2"]=self["webpackChunkmenupanda2"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(539)}));o=r.O(o)})();
//# sourceMappingURL=app.976d92b2.js.map